<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ä¿ç•™åŸæœ‰metaæ ‡ç­¾ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Play Monster Survivors, an exciting online survival game!">
    <meta name="keywords" content="Monster Survivors, online game, survival game">
    <meta name="author" content="xiyang.space">
    <link rel="canonical" href="https://xiyang.space">
    <title>Monster Survivors - Play Online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- æ·»åŠ æ¨¡æ€æ¡†æ ·å¼ -->
    <style>
        /* ä¼˜åŒ–æ¨¡æ€æ¡†æ ·å¼ */
        #gameModal {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* è°ƒæ•´æ¨¡æ€æ¡†å†…å®¹åŒºåŸŸ */
        #gameModal .bg-white {
            width: 95%;
            height: 90%;
            max-width: 1400px;
            display: flex;
            flex-direction: column;
            padding: 0;
            overflow: hidden;
        }
        
        /* è°ƒæ•´iframeå®¹å™¨ */
        .iframe-container {
            flex: 1;
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
        }
        
        /* è°ƒæ•´iframeæ ·å¼ */
        .modal-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            background: #000;
        }
        
        /* æ¨¡æ€æ¡†å¤´éƒ¨ */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        /* å…³é—­æŒ‰é’® */
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6c757d;
        }
        
        .close-btn:hover {
            color: #343a40;
        }
        
        /* æ·»åŠ æ¸¸æˆå®¹å™¨æ ·å¼ */
        .game-modal-content {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            padding: 0;
            overflow: hidden;
        }
        
        /* ç¡®ä¿æ¨¡æ€æ¡†å†…å®¹å±…ä¸­ */
        .modal-content {
            width: 95%;
            height: 95%;
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
        }
        
        /* æ·»åŠ å…¨å±æŒ‰é’®æ ·å¼ */
        .fullscreen-btn {
            position: absolute;
            top: 10px;
            right: 50px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            z-index: 1000;
        }
        
        /* æ·»åŠ æ¸¸æˆæ§åˆ¶æ  */
        .game-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 16px;
            background: #f0f0f0;
            border-bottom: 1px solid #ddd;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px;
            padding: 20px;
        }
        
        .game-item {
            width: 250px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .game-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .game-thumbnail {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .play-button {
            display: inline-block;
            background-color: #4CAF50;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 4px;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        .play-button:hover {
            background-color: #45a049;
        }
        
        /* æ·»åŠ æ¸¸æˆå¡ç‰‡æ‚¬åœæ•ˆæœ */
        .game-card {
            transition: all 0.3s ease;
        }
        
        .game-card:hover {
            transform: translateY(-8px);
        }
        
        /* æ·»åŠ æ¸¸æˆæ ‡ç­¾æ ·å¼ */
        .game-tag {
            display: inline-block;
            background-color: #e2e8f0;
            color: #4a5568;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            margin-right: 4px;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900">
    <header class="text-center py-6 bg-white shadow-md">
        <h1 class="text-4xl font-bold text-blue-600">Game Center</h1>
        <p class="text-lg text-gray-700">Choose your favorite game to play!</p>
    </header>

    <main class="max-w-6xl mx-auto p-4">
        <!-- æ·»åŠ ä¾§è¾¹æ å¯¼èˆª -->
        <div class="flex">
            <!-- ä¾§è¾¹æ  -->
            <div class="hidden md:block w-64 bg-white shadow-md p-4 mr-4">
                <h3 class="font-bold text-lg mb-4">æ¸¸æˆåˆ†ç±»</h3>
                <ul class="space-y-2">
                    <li><a href="#" class="flex items-center text-blue-600 hover:text-blue-800">
                        <span class="mr-2">ğŸ®</span> å…¨éƒ¨æ¸¸æˆ
                    </a></li>
                    <li><a href="#" class="flex items-center text-gray-700 hover:text-blue-600">
                        <span class="mr-2">ğŸƒ</span> åŠ¨ä½œæ¸¸æˆ
                    </a></li>
                    <li><a href="#" class="flex items-center text-gray-700 hover:text-blue-600">
                        <span class="mr-2">ğŸ§©</span> ç›Šæ™ºæ¸¸æˆ
                    </a></li>
                    <!-- æ›´å¤šåˆ†ç±»... -->
                </ul>
                
                <h3 class="font-bold text-lg mt-6 mb-4">çƒ­é—¨æ¸¸æˆ</h3>
                <div class="space-y-3">
                    <a href="#" class="block hover:bg-gray-50 p-2 rounded">
                        <img src="./thumbnails/monster-survivors.jpg" class="w-full h-20 object-cover rounded mb-1">
                        <p class="text-sm font-medium">Monster Survivors</p>
                    </a>
                    <!-- æ›´å¤šçƒ­é—¨æ¸¸æˆ... -->
                </div>
            </div>
            
            <!-- ä¸»å†…å®¹åŒº -->
            <div class="flex-1">
                <!-- æ¸¸æˆåˆ†ç±»å¯¼èˆª -->
                <div class="mb-6 flex flex-wrap gap-2 justify-center">
                    <button class="category-btn bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-600 active">å…¨éƒ¨</button>
                    <button class="category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300">åŠ¨ä½œ</button>
                    <button class="category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300">ç›Šæ™º</button>
                    <button class="category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300">å†’é™©</button>
                    <button class="category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300">ç­–ç•¥</button>
                    <button class="category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300">èµ›è½¦</button>
                    <button class="category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300">å°„å‡»</button>
                    <button class="category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300">æ¨¡æ‹Ÿ</button>
                    <button class="category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300">åŒäºº</button>
                </div>
                
                <!-- æœç´¢æ¡† -->
                <div class="mb-6 max-w-md mx-auto">
                    <div class="relative flex items-center">
                        <input type="text" placeholder="æœç´¢æ¸¸æˆ..." class="w-full px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button class="absolute right-2 bg-blue-500 text-white p-1 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- çƒ­é—¨æ¸¸æˆ -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">çƒ­é—¨æ¸¸æˆ</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- çƒ­é—¨æ¸¸æˆå¡ç‰‡1 -->
                        <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow group"
                             data-game="https://www.crazygames.com/game/monster-survivors">
                            <div class="relative">
                                <img src="./thumbnails/monster-survivors.jpg" alt="Monster Survivors" class="w-full h-48 object-cover">
                                <div class="absolute top-2 right-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded">çƒ­é—¨</div>
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent h-16"></div>
                            </div>
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold text-lg">Monster Survivors</h3>
                                    <div class="flex">
                                        <span class="text-yellow-500">â˜…â˜…â˜…â˜…</span><span class="text-gray-300">â˜†</span>
                                    </div>
                                </div>
                                <div class="mb-2 flex flex-wrap gap-1">
                                    <span class="game-tag">åŠ¨ä½œ</span>
                                    <span class="game-tag">ç”Ÿå­˜</span>
                                </div>
                                <p class="text-gray-600 text-sm mb-3">åœ¨æ€ªç‰©ä¸›ç”Ÿçš„ä¸–ç•Œä¸­ç”Ÿå­˜ï¼Œæ”¶é›†èµ„æºå¹¶å‡»è´¥æ•Œäººï¼</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-xs text-gray-500">æ¸¸æˆæ¬¡æ•°: 1,245</span>
                                    <button class="play-now-btn bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">å¼€å§‹æ¸¸æˆ</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- æ¸¸æˆç½‘æ ¼å¸ƒå±€ -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">æ‰€æœ‰æ¸¸æˆ</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- æ¸¸æˆå¡ç‰‡1 -->
                        <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                             data-game="https://www.crazygames.com/game/monster-survivors">
                            <img src="./thumbnails/monster-survivors.jpg" alt="Monster Survivors" 
                                 class="w-full h-48 object-cover">
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold text-lg">Monster Survivors</h3>
                                    <span class="text-yellow-500">â˜…â˜…â˜…â˜…â˜†</span>
                                </div>
                                <div class="mb-2">
                                    <span class="game-tag">åŠ¨ä½œ</span>
                                    <span class="game-tag">ç”Ÿå­˜</span>
                                </div>
                                <p class="text-gray-600 text-sm">åœ¨æ€ªç‰©ä¸›ç”Ÿçš„ä¸–ç•Œä¸­ç”Ÿå­˜ï¼Œæ”¶é›†èµ„æºå¹¶å‡»è´¥æ•Œäººï¼</p>
                            </div>
                        </div>

                        <!-- æ¸¸æˆå¡ç‰‡2 -->
                        <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                             data-game="https://sudoku.com/">
                            <img src="./thumbnails/sudoku.jpg" alt="Sudoku" 
                                 class="w-full h-48 object-cover">
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold text-lg">æ•°ç‹¬æŒ‘æˆ˜</h3>
                                    <span class="text-yellow-500">â˜…â˜…â˜…â˜…â˜…</span>
                                </div>
                                <div class="mb-2">
                                    <span class="game-tag">ç›Šæ™º</span>
                                    <span class="game-tag">æ•°å­—</span>
                                </div>
                                <p class="text-gray-600 text-sm">ç»å…¸æ•°ç‹¬æ¸¸æˆï¼Œé”»ç‚¼ä½ çš„é€»è¾‘æ€ç»´èƒ½åŠ›ï¼</p>
                            </div>
                        </div>

                         <!-- æ¸¸æˆå¡ç‰‡3 -->
                        <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                             data-game="https://www.crazygames.com/game/shadow-strike">
                            <img src="./thumbnails/shadow-strike.jpg" alt="Shadow Strike" 
                                 class="w-full h-48 object-cover">
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold text-lg">æš—å½±çªè¢­</h3>
                                    <span class="text-yellow-500">â˜…â˜…â˜…â˜†â˜†</span>
                                </div>
                                <div class="mb-2">
                                    <span class="game-tag">å°„å‡»</span>
                                    <span class="game-tag">åŠ¨ä½œ</span>
                                </div>
                                <p class="text-gray-600 text-sm">æˆä¸ºç²¾è‹±ç‰¹å·¥ï¼Œæ‰§è¡Œç§˜å¯†ä»»åŠ¡ï¼Œæ¶ˆç­æ•Œäººï¼</p>
                            </div>
                        </div>

                         <!-- æ¸¸æˆå¡ç‰‡4 -->
                        <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                             data-game="https://www.crazygames.com/game/cactus-mccoy">
                            <img src="./thumbnails/cactus-mccoy.jpg" alt="Cactus McCoy 1" 
                                 class="w-full h-48 object-cover">
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold text-lg">ä»™äººæŒéº¦è€ƒä¼Š</h3>
                                    <span class="text-yellow-500">â˜…â˜…â˜…â˜…â˜†</span>
                                </div>
                                <div class="mb-2">
                                    <span class="game-tag">å†’é™©</span>
                                    <span class="game-tag">å¹³å°</span>
                                </div>
                                <p class="text-gray-600 text-sm">æ§åˆ¶ä»™äººæŒæˆ˜å£«ï¼Œåœ¨è¥¿éƒ¨ä¸–ç•Œä¸­å†’é™©ï¼</p>
                            </div>
                        </div>

                        <!-- æ¸¸æˆå¡ç‰‡5 -->
                        <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                             data-game="https://www.crazygames.com/game/space-blaze">
                            <img src="./thumbnails/space-adventure.jpg" alt="å¤ªç©ºå†’é™©" 
                                 class="w-full h-48 object-cover">
                            <div class="p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="font-bold text-lg">å¤ªç©ºå†’é™©</h3>
                                    <span class="text-yellow-500">â˜…â˜…â˜…â˜…â˜†</span>
                                </div>
                                <div class="mb-2">
                                    <span class="game-tag">å†’é™©</span>
                                    <span class="game-tag">ç§‘å¹»</span>
                                </div>
                                <p class="text-gray-600 text-sm">æ¢ç´¢æœªçŸ¥å®‡å®™ï¼Œä¸å¤–æ˜Ÿç”Ÿç‰©äº’åŠ¨ï¼</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ä¿ç•™å…³äºæ¸¸æˆçš„å†…å®¹ -->
                <section class="mb-8 bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">å…³äºæˆ‘ä»¬çš„æ¸¸æˆ</h2>
                    <p class="text-gray-700 mb-4">
                        æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„æ¸¸æˆä¸­å¿ƒï¼è¿™é‡Œæ”¶é›†äº†å„ç§æœ‰è¶£çš„åœ¨çº¿æ¸¸æˆï¼Œä»åŠ¨ä½œå†’é™©åˆ°ç›Šæ™ºè§£è°œï¼Œåº”æœ‰å°½æœ‰ã€‚
                        æ‰€æœ‰æ¸¸æˆéƒ½ç»è¿‡ç²¾å¿ƒæŒ‘é€‰ï¼Œç¡®ä¿ç»™æ‚¨å¸¦æ¥æœ€ä½³çš„æ¸¸æˆä½“éªŒã€‚
                    </p>
                    <p class="text-gray-700">
                        æˆ‘ä»¬å®šæœŸæ›´æ–°æ¸¸æˆåº“ï¼Œæ·»åŠ æ–°çš„çƒ­é—¨æ¸¸æˆã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•å»ºè®®æˆ–åé¦ˆï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚
                        ç¥æ‚¨æ¸¸æˆæ„‰å¿«ï¼
                    </p>
                </section>
            </div>
        </div>
    </main>

    <!-- æ¨¡æ€å¼¹çª— -->
    <div id="gameModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl w-11/12 h-5/6 max-w-6xl relative">
            <div class="modal-header">
                <h3 class="font-bold">æ­£åœ¨æ¸¸æˆ</h3>
                <div class="flex items-center">
                    <button id="fullscreenBtn" class="mr-3 text-gray-600 hover:text-gray-800">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>
                        </svg>
                    </button>
                    <button class="close-btn" onclick="closeModal()">&times;</button>
                </div>
            </div>
            <div class="iframe-container">
                <iframe id="gameFrame" class="modal-iframe" src="about:blank" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <!-- åœ¨é¡µé¢åº•éƒ¨æ·»åŠ ä¸€ä¸ªç®¡ç†å‘˜æ§åˆ¶é¢æ¿ -->
    <div id="adminPanel" class="fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 hidden">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <h3 class="font-bold">ç®¡ç†å‘˜æ§åˆ¶é¢æ¿</h3>
            <div>
                <button id="captureManualBtn" class="bg-blue-500 text-white px-4 py-2 rounded mr-2">
                    æˆªå–å½“å‰æ¸¸æˆç”»é¢
                </button>
                <button id="uploadThumbnailBtn" class="bg-green-500 text-white px-4 py-2 rounded">
                    ä¸Šä¼ ç¼©ç•¥å›¾
                </button>
            </div>
        </div>
    </div>

    <!-- æ”¹è¿›é¡µè„š -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">æ¸¸æˆä¸­å¿ƒ</h3>
                    <p class="text-gray-400 mb-4">æä¾›å„ç§æœ‰è¶£çš„åœ¨çº¿æ¸¸æˆï¼Œä»åŠ¨ä½œå†’é™©åˆ°ç›Šæ™ºè§£è°œï¼Œåº”æœ‰å°½æœ‰ã€‚</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><span class="sr-only">å¾®ä¿¡</span>å¾®ä¿¡</a>
                        <a href="#" class="text-gray-400 hover:text-white"><span class="sr-only">QQ</span>QQ</a>
                        <a href="#" class="text-gray-400 hover:text-white"><span class="sr-only">å¾®åš</span>å¾®åš</a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">å¿«é€Ÿé“¾æ¥</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">é¦–é¡µ</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">çƒ­é—¨æ¸¸æˆ</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">æ–°æ¸¸æˆ</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">å…³äºæˆ‘ä»¬</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">è”ç³»æˆ‘ä»¬</h3>
                    <p class="text-gray-400">æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Ÿè¯·éšæ—¶è”ç³»æˆ‘ä»¬ï¼</p>
                    <a href="mailto:contact@example.com" class="text-blue-400 hover:text-blue-300 mt-2 inline-block">contact@example.com</a>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400">&copy; 2025 æ¸¸æˆä¸­å¿ƒ. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
                <div class="mt-4 md:mt-0">
                    <a href="#" class="text-gray-400 hover:text-white mx-2">éšç§æ”¿ç­–</a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">ä½¿ç”¨æ¡æ¬¾</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // åœ¨é¡µé¢åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œï¼Œç¡®ä¿æ¨¡æ€æ¡†éšè—
        window.addEventListener('load', function() {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œç¡®ä¿æ¨¡æ€æ¡†éšè—');
            
            // å¼ºåˆ¶éšè—æ¨¡æ€æ¡†
            const gameModal = document.getElementById('gameModal');
            if (gameModal) {
                // æ·»åŠ hiddenç±»
                gameModal.classList.add('hidden');
                // é¢å¤–è®¾ç½®displayæ ·å¼
                gameModal.style.display = 'none';
                console.log('å·²å¼ºåˆ¶éšè—æ¨¡æ€æ¡†');
            }
            
            // æ¸…ç©ºiframeçš„src
            const gameFrame = document.getElementById('gameFrame');
            if (gameFrame) {
                gameFrame.src = 'about:blank';
                console.log('å·²æ¸…ç©ºiframeæº');
            }
        });
        
        // é‡å†™closeModalå‡½æ•°ï¼Œç¡®ä¿æ­£ç¡®å…³é—­
        function closeModal() {
            console.log('å…³é—­æ¨¡æ€æ¡†');
            const modal = document.getElementById('gameModal');
            const iframe = document.getElementById('gameFrame');
            
            // åœæ­¢iframeå†…å®¹åŠ è½½
            if (iframe) {
                iframe.src = 'about:blank';
            }
            
            // éšè—æ¨¡æ€æ¡†
            if (modal) {
                modal.classList.add('hidden');
                modal.style.display = 'none';
            }
            
            document.body.classList.remove('overflow-hidden');
        }
        
        // æ›´æ–°ä¸ºå¯ç”¨çš„æ¸¸æˆé“¾æ¥
        const gameUrls = {
            "monster-survivors": "https://unblocked-games.s3.amazonaws.com/monster-survivors.html",
            "sudoku": "https://unblocked-games.s3.amazonaws.com/sudoku.html",
            "shadow-strike": "https://unblocked-games.s3.amazonaws.com/shadow-strike.html",
            "cactus-mccoy": "https://unblocked-games.s3.amazonaws.com/cactus-mccoy-1.html",
            "space-adventure": "https://unblocked-games.s3.amazonaws.com/space-blaze.html"
        };
        
        // æ·»åŠ æ¸¸æˆå¡ç‰‡ç‚¹å‡»äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æ­£åœ¨ä¸ºæ¸¸æˆå¡ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶');
            
            // ä¸ºæ‰€æœ‰æ¸¸æˆå¡ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶
            const gameCards = document.querySelectorAll('.game-card');
            console.log('æ‰¾åˆ°æ¸¸æˆå¡ç‰‡æ•°é‡:', gameCards.length);
            
            gameCards.forEach(card => {
                // ç§»é™¤å¯èƒ½å­˜åœ¨çš„æ—§äº‹ä»¶ç›‘å¬å™¨
                const newCard = card.cloneNode(true);
                card.parentNode.replaceChild(newCard, card);
                
                // è·å–æ¸¸æˆåç§°
                const gameTitle = newCard.querySelector('h3').textContent.toLowerCase().trim();
                console.log('æ¸¸æˆæ ‡é¢˜:', gameTitle);
                
                // è®¾ç½®æ¸¸æˆURL
                let gameUrl = '';
                if (gameTitle.includes('monster') || gameTitle.includes('æ€ªç‰©')) {
                    gameUrl = gameUrls["monster-survivors"];
                } else if (gameTitle.includes('sudoku') || gameTitle.includes('æ•°ç‹¬')) {
                    gameUrl = gameUrls["sudoku"];
                } else if (gameTitle.includes('shadow') || gameTitle.includes('æš—å½±')) {
                    gameUrl = gameUrls["shadow-strike"];
                } else if (gameTitle.includes('cactus') || gameTitle.includes('ä»™äººæŒ')) {
                    gameUrl = gameUrls["cactus-mccoy"];
                } else if (gameTitle.includes('space') || gameTitle.includes('å¤ªç©º')) {
                    gameUrl = gameUrls["space-adventure"];
                }
                
                // è®¾ç½®æ¸¸æˆURLå±æ€§
                newCard.dataset.game = gameUrl;
                console.log('è®¾ç½®æ¸¸æˆURL:', gameUrl);
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                newCard.addEventListener('click', function() {
                    console.log('æ¸¸æˆå¡ç‰‡è¢«ç‚¹å‡»:', gameUrl);
                    if (gameUrl) {
                        openModal(gameUrl);
                    }
                });
                
                // ä¸ºå¡ç‰‡ä¸­çš„æŒ‰é’®æ·»åŠ å•ç‹¬çš„ç‚¹å‡»äº‹ä»¶
                const playButton = newCard.querySelector('.play-now-btn');
                if (playButton) {
                    playButton.addEventListener('click', function(e) {
                        e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
                        console.log('æ¸¸æˆæŒ‰é’®è¢«ç‚¹å‡»:', gameUrl);
                        if (gameUrl) {
                            openModal(gameUrl);
                        }
                    });
                }
            });
        });
        
        // æ”¹è¿›æ¸¸æˆåŠ è½½ä½“éªŒ
        function openModal(url) {
            console.log('æ‰“å¼€æ¸¸æˆ:', url);
            
            if (!url) {
                console.error('æ— æ•ˆçš„æ¸¸æˆURL');
                return;
            }
            
            const modal = document.getElementById('gameModal');
            const iframe = document.getElementById('gameFrame');
            
            if (!modal || !iframe) {
                console.error('æ‰¾ä¸åˆ°æ¨¡æ€æ¡†æˆ–iframeå…ƒç´ ');
                return;
            }
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            modal.classList.remove('hidden');
            modal.style.display = 'flex';
            document.body.classList.add('overflow-hidden');
            
            // åˆ›å»ºæ›´å¥½çš„åŠ è½½åŠ¨ç”»
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-80 z-10';
            loadingDiv.innerHTML = `
                <div class="w-64 bg-gray-200 rounded-full h-4 mb-4 overflow-hidden">
                    <div id="loadingBar" class="bg-blue-500 h-4 rounded-full" style="width: 0%"></div>
                </div>
                <p class="text-white" id="loadingText">æ¸¸æˆåŠ è½½ä¸­ (0%)...</p>
            `;
            loadingDiv.id = 'gameLoading';
            
            // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„æ—§åŠ è½½æç¤º
            const oldLoading = document.getElementById('gameLoading');
            if (oldLoading) oldLoading.remove();
            
            // æ·»åŠ æ–°çš„åŠ è½½æç¤º
            const iframeContainer = document.querySelector('.iframe-container');
            if (iframeContainer) {
                iframeContainer.appendChild(loadingDiv);
            }
            
            // æ¨¡æ‹ŸåŠ è½½è¿›åº¦
            let progress = 0;
            const loadingInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 90) {
                    progress = 90; // æœ€å¤šåˆ°90%ï¼Œç­‰å¾…å®é™…åŠ è½½å®Œæˆ
                }
                
                const loadingBar = document.getElementById('loadingBar');
                const loadingText = document.getElementById('loadingText');
                
                if (loadingBar && loadingText) {
                    loadingBar.style.width = progress + '%';
                    loadingText.textContent = `æ¸¸æˆåŠ è½½ä¸­ (${Math.round(progress)}%)...`;
                }
            }, 300);
            
            // è®¾ç½®iframeæº
            iframe.src = url;
            
            // å½“iframeåŠ è½½å®Œæˆåç§»é™¤åŠ è½½æç¤º
            iframe.onload = function() {
                console.log('æ¸¸æˆåŠ è½½å®Œæˆ:', url);
                clearInterval(loadingInterval);
                
                // å®Œæˆè¿›åº¦æ¡
                const loadingBar = document.getElementById('loadingBar');
                const loadingText = document.getElementById('loadingText');
                
                if (loadingBar && loadingText) {
                    loadingBar.style.width = '100%';
                    loadingText.textContent = 'æ¸¸æˆåŠ è½½å®Œæˆ!';
                }
                
                // å»¶è¿Ÿç§»é™¤åŠ è½½æç¤ºï¼Œè®©ç”¨æˆ·çœ‹åˆ°100%
                setTimeout(() => {
                    const loadingDiv = document.getElementById('gameLoading');
                    if (loadingDiv) loadingDiv.remove();
                }, 500);
            };
        }

        // ä½¿ç”¨MutationObserverç›‘å¬DOMå˜åŒ–ï¼Œç¡®ä¿åœ¨å…ƒç´ å‡ºç°æ—¶ç«‹å³ä¿®å¤ç¼©ç•¥å›¾
        document.addEventListener('DOMContentLoaded', function() {
            console.log('è®¾ç½®MutationObserverç›‘å¬DOMå˜åŒ–');
            
            // åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿå™¨å®ä¾‹
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    // æ£€æŸ¥æ˜¯å¦æœ‰æ–°èŠ‚ç‚¹æ·»åŠ 
                    if (mutation.addedNodes.length) {
                        // æŸ¥æ‰¾æ‰€æœ‰æ¸¸æˆå¡ç‰‡
                        document.querySelectorAll('.game-card').forEach(function(card) {
                            const title = card.querySelector('h3')?.textContent || '';
                            const img = card.querySelector('img');
                            
                            if (!img) return;
                            
                            // æ ¹æ®æ ‡é¢˜è®¾ç½®æ­£ç¡®çš„å›¾ç‰‡URL
                            if (title.includes('æš—å½±çªè¢­')) {
                                // ä½¿ç”¨data-srcå±æ€§å­˜å‚¨åŸå§‹URL
                                if (!img.dataset.originalSrc) {
                                    img.dataset.originalSrc = img.src;
                                }
                                // è®¾ç½®æ–°çš„src
                                img.src = 'https://img.gamedistribution.com/d7b4c3e5f4e9415fb0ae1c1a202e02e1-512x384.jpeg';
                                console.log('å·²è®¾ç½®æš—å½±çªè¢­ç¼©ç•¥å›¾:', img.src);
                            } 
                            else if (title.includes('ä»™äººæŒéº¦è€ƒä¼Š')) {
                                if (!img.dataset.originalSrc) {
                                    img.dataset.originalSrc = img.src;
                                }
                                img.src = 'https://img.gamedistribution.com/63abbece5c9d4a1e98c2f5c107292d5a-512x384.jpeg';
                                console.log('å·²è®¾ç½®ä»™äººæŒéº¦è€ƒä¼Šç¼©ç•¥å›¾:', img.src);
                            }
                            else if (title.includes('å¤ªç©ºå†’é™©')) {
                                if (!img.dataset.originalSrc) {
                                    img.dataset.originalSrc = img.src;
                                }
                                img.src = 'https://img.gamedistribution.com/d9c0a4d2e4554631b9a2c3c7f1acb4f0-512x384.jpeg';
                                console.log('å·²è®¾ç½®å¤ªç©ºå†’é™©ç¼©ç•¥å›¾:', img.src);
                            }
                        });
                    }
                });
            });
            
            // é…ç½®è§‚å¯Ÿé€‰é¡¹
            const config = { childList: true, subtree: true };
            
            // å¼€å§‹è§‚å¯Ÿdocument.bodyçš„å˜åŒ–
            observer.observe(document.body, config);
            
            // ç«‹å³æ£€æŸ¥ç°æœ‰çš„æ¸¸æˆå¡ç‰‡
            document.querySelectorAll('.game-card').forEach(function(card) {
                const title = card.querySelector('h3')?.textContent || '';
                const img = card.querySelector('img');
                
                if (!img) return;
                
                console.log('æ£€æŸ¥æ¸¸æˆå¡ç‰‡:', title);
                
                // ç›´æ¥æ›¿æ¢å›¾ç‰‡URL
                if (title.includes('æš—å½±çªè¢­')) {
                    img.src = 'https://img.gamedistribution.com/d7b4c3e5f4e9415fb0ae1c1a202e02e1-512x384.jpeg';
                    console.log('å·²è®¾ç½®æš—å½±çªè¢­ç¼©ç•¥å›¾');
                    
                    // æ·»åŠ åŠ è½½äº‹ä»¶ç›‘å¬
                    img.onload = function() { console.log('æš—å½±çªè¢­ç¼©ç•¥å›¾åŠ è½½æˆåŠŸ'); };
                    img.onerror = function() { console.error('æš—å½±çªè¢­ç¼©ç•¥å›¾åŠ è½½å¤±è´¥'); };
                } 
                else if (title.includes('ä»™äººæŒéº¦è€ƒä¼Š')) {
                    img.src = 'https://img.gamedistribution.com/63abbece5c9d4a1e98c2f5c107292d5a-512x384.jpeg';
                    console.log('å·²è®¾ç½®ä»™äººæŒéº¦è€ƒä¼Šç¼©ç•¥å›¾');
                    
                    // æ·»åŠ åŠ è½½äº‹ä»¶ç›‘å¬
                    img.onload = function() { console.log('ä»™äººæŒéº¦è€ƒä¼Šç¼©ç•¥å›¾åŠ è½½æˆåŠŸ'); };
                    img.onerror = function() { console.error('ä»™äººæŒéº¦è€ƒä¼Šç¼©ç•¥å›¾åŠ è½½å¤±è´¥'); };
                }
            });
        });
        
        // å¤‡ç”¨æ–¹æ¡ˆï¼šç›´æ¥ä¿®æ”¹HTML
        window.addEventListener('load', function() {
            setTimeout(function() {
                // æŸ¥æ‰¾æ‰€æœ‰imgæ ‡ç­¾
                document.querySelectorAll('img').forEach(function(img) {
                    // æ£€æŸ¥altæ–‡æœ¬
                    if (img.alt && (img.alt.includes('Shadow Strike') || img.alt.includes('æš—å½±çªè¢­'))) {
                        img.src = 'https://img.gamedistribution.com/d7b4c3e5f4e9415fb0ae1c1a202e02e1-512x384.jpeg';
                        console.log('é€šè¿‡altæ–‡æœ¬è®¾ç½®æš—å½±çªè¢­ç¼©ç•¥å›¾');
                    }
                    else if (img.alt && (img.alt.includes('Cactus McCoy') || img.alt.includes('ä»™äººæŒéº¦è€ƒä¼Š'))) {
                        img.src = 'https://img.gamedistribution.com/63abbece5c9d4a1e98c2f5c107292d5a-512x384.jpeg';
                        console.log('é€šè¿‡altæ–‡æœ¬è®¾ç½®ä»™äººæŒéº¦è€ƒä¼Šç¼©ç•¥å›¾');
                    }
                    
                    // æ£€æŸ¥æ˜¯å¦å›¾ç‰‡åŠ è½½å¤±è´¥
                    if (!img.complete || img.naturalHeight === 0) {
                        // å°è¯•ä»çˆ¶å…ƒç´ æ‰¾åˆ°æ¸¸æˆæ ‡é¢˜
                        const card = img.closest('.game-card');
                        if (card) {
                            const title = card.querySelector('h3')?.textContent || '';
                            if (title.includes('æš—å½±')) {
                                img.src = 'https://img.gamedistribution.com/d7b4c3e5f4e9415fb0ae1c1a202e02e1-512x384.jpeg';
                            } else if (title.includes('ä»™äººæŒ')) {
                                img.src = 'https://img.gamedistribution.com/63abbece5c9d4a1e98c2f5c107292d5a-512x384.jpeg';
                            }
                        }
                    }
                });
            }, 1000); // ç­‰å¾…1ç§’ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½
        });

        // ç›´æ¥ä¿®æ”¹æ¸¸æˆå¡ç‰‡çš„HTMLç»“æ„
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ç›´æ¥ä¿®æ”¹æ¸¸æˆå¡ç‰‡HTMLç»“æ„');
            
            // è·å–æ‰€æœ‰æ¸¸æˆå¡ç‰‡
            const gameCards = document.querySelectorAll('.game-card');
            
            // éå†æ‰€æœ‰æ¸¸æˆå¡ç‰‡
            gameCards.forEach(card => {
                const title = card.querySelector('h3')?.textContent || '';
                
                // æ ¹æ®æ¸¸æˆæ ‡é¢˜åˆ›å»ºæ–°çš„å›¾ç‰‡å…ƒç´ 
                let imgSrc = '';
                if (title.includes('Monster') || title.includes('æ€ªç‰©')) {
                    imgSrc = 'thumbnails/monster-survivors.jpg';
                } 
                else if (title.includes('æ•°ç‹¬')) {
                    imgSrc = 'thumbnails/Sudoku.jpg';
                }
                else if (title.includes('æš—å½±')) {
                    imgSrc = 'thumbnails/Shadow Strike.jpg';
                }
                else if (title.includes('ä»™äººæŒ')) {
                    imgSrc = 'thumbnails/Cactus McCoy1.jpg';
                }
                else if (title.includes('å¤ªç©º')) {
                    // å¦‚æœæœ‰å¤ªç©ºå†’é™©çš„ç¼©ç•¥å›¾
                    imgSrc = 'thumbnails/space-adventure.jpg';
                }
                
                if (imgSrc) {
                    // æ‰¾åˆ°å›¾ç‰‡å®¹å™¨
                    const imgContainer = card.querySelector('.relative');
                    if (imgContainer) {
                        // ç§»é™¤æ—§çš„å›¾ç‰‡
                        const oldImg = imgContainer.querySelector('img');
                        if (oldImg) {
                            oldImg.remove();
                        }
                        
                        // åˆ›å»ºæ–°çš„å›¾ç‰‡å…ƒç´ 
                        const newImg = document.createElement('img');
                        newImg.src = imgSrc;
                        newImg.alt = title;
                        newImg.className = 'w-full h-48 object-cover rounded-t-lg';
                        
                        // æ·»åŠ é”™è¯¯å¤„ç†
                        newImg.onerror = function() {
                            console.error(`æ— æ³•åŠ è½½å›¾ç‰‡: ${imgSrc}`);
                            // ä½¿ç”¨å¤‡ç”¨è¿œç¨‹å›¾ç‰‡
                            if (title.includes('æš—å½±')) {
                                this.src = 'https://img.gamedistribution.com/d7b4c3e5f4e9415fb0ae1c1a202e02e1-512x384.jpeg';
                            } 
                            else if (title.includes('ä»™äººæŒ')) {
                                this.src = 'https://img.gamedistribution.com/63abbece5c9d4a1e98c2f5c107292d5a-512x384.jpeg';
                            }
                            else if (title.includes('æ€ªç‰©') || title.includes('Monster')) {
                                this.src = 'https://img.gamedistribution.com/c84a08e3a72d4dc9b675b81af732e8e5-512x384.jpeg';
                            }
                            else if (title.includes('æ•°ç‹¬')) {
                                this.src = 'https://img.gamedistribution.com/2e44fb86fd2e4dd3b53f0d8aa7842ace-512x384.jpeg';
                            }
                        };
                        
                        // å°†æ–°å›¾ç‰‡æ·»åŠ åˆ°å®¹å™¨çš„å¼€å¤´
                        imgContainer.insertBefore(newImg, imgContainer.firstChild);
                        
                        console.log(`å·²æ›¿æ¢ ${title} çš„ç¼©ç•¥å›¾ä¸º: ${imgSrc}`);
                    }
                }
            });
        });

        // æ¸¸æˆæ”¶è—åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–æ”¶è—åˆ—è¡¨
            let favorites = JSON.parse(localStorage.getItem('gamesFavorites')) || [];
            
            // ä¸ºæ¯ä¸ªæ¸¸æˆå¡ç‰‡æ·»åŠ æ”¶è—æŒ‰é’®
            document.querySelectorAll('.game-card').forEach(card => {
                const gameTitle = card.querySelector('h3').textContent;
                const cardHeader = card.querySelector('.p-4');
                
                // åˆ›å»ºæ”¶è—æŒ‰é’®
                const favBtn = document.createElement('button');
                favBtn.className = 'absolute top-2 right-2 bg-white bg-opacity-70 rounded-full p-1 hover:bg-opacity-100 transition-all z-10';
                favBtn.innerHTML = favorites.includes(gameTitle) ? 
                    '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>' :
                    '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>';
                
                // æ·»åŠ æ”¶è—äº‹ä»¶
                favBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
                    
                    if (favorites.includes(gameTitle)) {
                        // ç§»é™¤æ”¶è—
                        favorites = favorites.filter(title => title !== gameTitle);
                        this.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>';
                    } else {
                        // æ·»åŠ æ”¶è—
                        favorites.push(gameTitle);
                        this.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>';
                    }
                    
                    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                    localStorage.setItem('gamesFavorites', JSON.stringify(favorites));
                });
                
                // æ·»åŠ åˆ°å¡ç‰‡
                card.querySelector('.relative').appendChild(favBtn);
            });
            
            // æ·»åŠ æ”¶è—æ¸¸æˆåˆ†ç±»
            const categoryBtns = document.querySelector('.category-btn').parentNode;
            const favBtn = document.createElement('button');
            favBtn.className = 'category-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300';
            favBtn.textContent = 'æˆ‘çš„æ”¶è—';
            favBtn.addEventListener('click', function() {
                // åˆ‡æ¢åˆ†ç±»æŒ‰é’®çŠ¶æ€
                document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('bg-blue-500', 'text-white'));
                document.querySelectorAll('.category-btn').forEach(btn => btn.classList.add('bg-gray-200', 'text-gray-800'));
                this.classList.remove('bg-gray-200', 'text-gray-800');
                this.classList.add('bg-blue-500', 'text-white');
                
                // è¿‡æ»¤æ¸¸æˆå¡ç‰‡
                document.querySelectorAll('.game-card').forEach(card => {
                    const gameTitle = card.querySelector('h3').textContent;
                    if (favorites.includes(gameTitle)) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });

        // æœç´¢åŠŸèƒ½å®ç°
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.querySelector('input[placeholder="æœç´¢æ¸¸æˆ..."]');
            const searchButton = searchInput.nextElementSibling;
            
            function performSearch() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                if (searchTerm === '') {
                    // å¦‚æœæœç´¢è¯ä¸ºç©ºï¼Œæ˜¾ç¤ºæ‰€æœ‰æ¸¸æˆ
                    document.querySelectorAll('.game-card').forEach(card => {
                        card.style.display = '';
                    });
                    return;
                }
                
                // æœç´¢æ¸¸æˆ
                document.querySelectorAll('.game-card').forEach(card => {
                    const title = card.querySelector('h3').textContent.toLowerCase();
                    const description = card.querySelector('p').textContent.toLowerCase();
                    const tags = Array.from(card.querySelectorAll('.game-tag')).map(tag => tag.textContent.toLowerCase());
                    
                    // å¦‚æœæ ‡é¢˜ã€æè¿°æˆ–æ ‡ç­¾åŒ…å«æœç´¢è¯ï¼Œæ˜¾ç¤ºæ¸¸æˆå¡ç‰‡
                    if (title.includes(searchTerm) || description.includes(searchTerm) || tags.some(tag => tag.includes(searchTerm))) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // åˆ‡æ¢åˆ†ç±»æŒ‰é’®çŠ¶æ€
                document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('bg-blue-500', 'text-white'));
                document.querySelectorAll('.category-btn').forEach(btn => btn.classList.add('bg-gray-200', 'text-gray-800'));
            }
            
            // æ·»åŠ æœç´¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            searchButton.addEventListener('click', performSearch);
            
            // æ·»åŠ å›è½¦é”®æœç´¢
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        });

        // åˆ†ç±»åŠŸèƒ½å®ç°
        document.addEventListener('DOMContentLoaded', function() {
            // ä¸ºæ‰€æœ‰åˆ†ç±»æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // å¦‚æœå·²ç»æ˜¯æ¿€æ´»çŠ¶æ€ï¼Œä¸åšä»»ä½•æ“ä½œ
                    if (this.classList.contains('bg-blue-500')) return;
                    
                    // åˆ‡æ¢åˆ†ç±»æŒ‰é’®çŠ¶æ€
                    document.querySelectorAll('.category-btn').forEach(btn => {
                        btn.classList.remove('bg-blue-500', 'text-white');
                        btn.classList.add('bg-gray-200', 'text-gray-800');
                    });
                    
                    this.classList.remove('bg-gray-200', 'text-gray-800');
                    this.classList.add('bg-blue-500', 'text-white');
                    
                    const category = this.textContent.trim().toLowerCase();
                    
                    // å¦‚æœæ˜¯"å…¨éƒ¨"åˆ†ç±»ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ¸¸æˆ
                    if (category === 'å…¨éƒ¨') {
                        document.querySelectorAll('.game-card').forEach(card => {
                            card.style.display = '';
                        });
                        return;
                    }
                    
                    // è¿‡æ»¤æ¸¸æˆå¡ç‰‡
                    document.querySelectorAll('.game-card').forEach(card => {
                        const tags = Array.from(card.querySelectorAll('.game-tag')).map(tag => tag.textContent.toLowerCase());
                        
                        if (tags.includes(category)) {
                            card.style.display = '';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
        });

        // æ¸¸æˆè¯„åˆ†ç³»ç»Ÿ
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–è¯„åˆ†
            let ratings = JSON.parse(localStorage.getItem('gameRatings')) || {};
            
            // ä¸ºæ¯ä¸ªæ¸¸æˆå¡ç‰‡æ·»åŠ å¯äº¤äº’çš„è¯„åˆ†
            document.querySelectorAll('.game-card').forEach(card => {
                const gameTitle = card.querySelector('h3').textContent;
                const ratingContainer = card.querySelector('.text-yellow-500').parentNode;
                
                // æ¸…ç©ºç°æœ‰è¯„åˆ†
                ratingContainer.innerHTML = '';
                
                // åˆ›å»ºäº¤äº’å¼è¯„åˆ†
                const ratingDiv = document.createElement('div');
                ratingDiv.className = 'flex items-center';
                
                // æ·»åŠ 5ä¸ªæ˜Ÿæ˜Ÿ
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('span');
                    star.className = 'cursor-pointer transition-colors';
                    star.innerHTML = (ratings[gameTitle] && i <= ratings[gameTitle]) ? 
                        '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>' :
                        '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-300" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>';
                    
                    // æ·»åŠ è¯„åˆ†äº‹ä»¶
                    star.addEventListener('click', function(e) {
                        e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
                        
                        // æ›´æ–°è¯„åˆ†
                        ratings[gameTitle] = i;
                        localStorage.setItem('gameRatings', JSON.stringify(ratings));
                        
                        // æ›´æ–°æ˜Ÿæ˜Ÿæ˜¾ç¤º
                        const stars = this.parentNode.querySelectorAll('span');
                        stars.forEach((s, index) => {
                            if (index < i) {
                                s.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>';
                            } else {
                                s.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-300" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>';
                            }
                        });
                    });
                    
                    ratingDiv.appendChild(star);
                }
                
                ratingContainer.appendChild(ratingDiv);
            });
        });

        // æ¸¸æˆæ¨èç³»ç»Ÿ
        document.addEventListener('DOMContentLoaded', function() {
            // è·å–ç”¨æˆ·æ¸¸æˆå†å²
            let gameHistory = JSON.parse(localStorage.getItem('gameHistory')) || [];
            
            // æ·»åŠ æ¸¸æˆæ¨èéƒ¨åˆ†
            const mainContent = document.querySelector('main .flex-1');
            
            // åˆ›å»ºæ¨èæ¸¸æˆéƒ¨åˆ†
            function createRecommendations() {
                // å¦‚æœæ²¡æœ‰æ¸¸æˆå†å²ï¼Œä¸æ˜¾ç¤ºæ¨è
                if (gameHistory.length === 0) return;
                
                // è·å–æ‰€æœ‰æ¸¸æˆæ ‡ç­¾
                const allTags = {};
                document.querySelectorAll('.game-card').forEach(card => {
                    const tags = Array.from(card.querySelectorAll('.game-tag')).map(tag => tag.textContent.toLowerCase());
                    const title = card.querySelector('h3').textContent;
                    
                    tags.forEach(tag => {
                        if (!allTags[tag]) allTags[tag] = [];
                        allTags[tag].push(title);
                    });
                });
                
                // æ ¹æ®å†å²è®°å½•æ‰¾å‡ºç”¨æˆ·å–œæ¬¢çš„æ ‡ç­¾
                const tagCounts = {};
                gameHistory.forEach(game => {
                    const card = Array.from(document.querySelectorAll('.game-card')).find(card => 
                        card.querySelector('h3').textContent === game
                    );
                    
                    if (card) {
                        const tags = Array.from(card.querySelectorAll('.game-tag')).map(tag => tag.textContent.toLowerCase());
                        tags.forEach(tag => {
                            tagCounts[tag] = (tagCounts[tag] || 0) + 1;
                        });
                    }
                });
                
                // æ‰¾å‡ºæœ€å—æ¬¢è¿çš„æ ‡ç­¾
                const popularTags = Object.keys(tagCounts).sort((a, b) => tagCounts[b] - tagCounts[a]).slice(0, 2);
                
                // æ ¹æ®æ ‡ç­¾æ¨èæ¸¸æˆ
                let recommendedGames = [];
                popularTags.forEach(tag => {
                    if (allTags[tag]) {
                        recommendedGames = [...recommendedGames, ...allTags[tag]];
                    }
                });
                
                // å»é‡å¹¶æ’é™¤å·²ç©è¿‡çš„æ¸¸æˆ
                recommendedGames = [...new Set(recommendedGames)].filter(game => !gameHistory.includes(game));
                
                // å¦‚æœæœ‰æ¨èæ¸¸æˆï¼Œåˆ›å»ºæ¨èéƒ¨åˆ†
                if (recommendedGames.length > 0) {
                    const recommendSection = document.createElement('section');
                    recommendSection.className = 'mb-8';
                    recommendSection.innerHTML = `
                        <h2 class="text-2xl font-semibold text-gray-800 mb-4">ä¸ºæ‚¨æ¨è</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="recommendedGames"></div>
                    `;
                    
                    // æ’å…¥åˆ°çƒ­é—¨æ¸¸æˆä¹‹å
                    const hotGamesSection = document.querySelector('section');
                    hotGamesSection.parentNode.insertBefore(recommendSection, hotGamesSection.nextSibling);
                    
                    // æ·»åŠ æ¨èæ¸¸æˆ
                    const recommendedContainer = document.getElementById('recommendedGames');
                    recommendedGames.slice(0, 3).forEach(game => {
                        const originalCard = Array.from(document.querySelectorAll('.game-card')).find(card => 
                            card.querySelector('h3').textContent === game
                        );
                        
                        if (originalCard) {
                            const clone = originalCard.cloneNode(true);
                            recommendedContainer.appendChild(clone);
                        }
                    });
                }
            }
            
            // ä¿®æ”¹openModalå‡½æ•°ï¼Œè®°å½•æ¸¸æˆå†å²
            const originalOpenModal = window.openModal;
            window.openModal = function(url) {
                // è°ƒç”¨åŸå§‹å‡½æ•°
                originalOpenModal(url);
                
                // è®°å½•æ¸¸æˆå†å²
                const gameCards = document.querySelectorAll('.game-card');
                for (const card of gameCards) {
                    if (card.dataset.game === url) {
                        const gameTitle = card.querySelector('h3').textContent;
                        
                        // æ·»åŠ åˆ°å†å²è®°å½•
                        if (!gameHistory.includes(gameTitle)) {
                            gameHistory.push(gameTitle);
                            // åªä¿ç•™æœ€è¿‘10ä¸ªæ¸¸æˆ
                            if (gameHistory.length > 10) {
                                gameHistory.shift();
                            }
                            localStorage.setItem('gameHistory', JSON.stringify(gameHistory));
                        }
                        
                        break;
                    }
                }
            };
            
            // åˆ›å»ºæ¨è
            createRecommendations();
        });

        // å®šä¹‰æœ¬åœ°ç¼©ç•¥å›¾è·¯å¾„æ˜ å°„
        const localThumbnails = {
            "monster-survivors": "thumbnails/monster-survivors.jpg",
            "sudoku": "thumbnails/Sudoku.jpg",
            "shadow-strike": "thumbnails/Shadow Strike.jpg",
            "cactus-mccoy": "thumbnails/Cactus McCoy1.jpg"
        };
        
        // åœ¨é¡µé¢åŠ è½½å®Œæˆåæ›´æ–°ç¼©ç•¥å›¾
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æ›´æ–°æ¸¸æˆç¼©ç•¥å›¾ä¸ºæœ¬åœ°è·¯å¾„');
            
            // è·å–æ‰€æœ‰æ¸¸æˆå¡ç‰‡
            document.querySelectorAll('.game-card').forEach(card => {
                // è·å–æ¸¸æˆæ ‡é¢˜
                const title = card.querySelector('h3')?.textContent || '';
                // è·å–å›¾ç‰‡å…ƒç´ 
                const img = card.querySelector('img');
                
                if (!img) return;
                
                // æ ¹æ®æ ‡é¢˜è®¾ç½®æ­£ç¡®çš„æœ¬åœ°å›¾ç‰‡è·¯å¾„
                if (title.includes('æ€ªç‰©å¹¸å­˜è€…') || title.includes('Monster Survivors')) {
                    img.src = localThumbnails["monster-survivors"];
                    console.log('å·²è®¾ç½®Monster Survivorsæœ¬åœ°ç¼©ç•¥å›¾');
                } 
                else if (title.includes('æ•°ç‹¬') || title.includes('Sudoku')) {
                    img.src = localThumbnails["sudoku"];
                    console.log('å·²è®¾ç½®Sudokuæœ¬åœ°ç¼©ç•¥å›¾');
                }
                else if (title.includes('æš—å½±çªè¢­') || title.includes('Shadow Strike')) {
                    img.src = localThumbnails["shadow-strike"];
                    console.log('å·²è®¾ç½®Shadow Strikeæœ¬åœ°ç¼©ç•¥å›¾');
                }
                else if (title.includes('ä»™äººæŒéº¦è€ƒä¼Š') || title.includes('Cactus McCoy')) {
                    img.src = localThumbnails["cactus-mccoy"];
                    console.log('å·²è®¾ç½®Cactus McCoyæœ¬åœ°ç¼©ç•¥å›¾');
                }
                
                // æ·»åŠ é”™è¯¯å¤„ç†ï¼Œå¦‚æœæœ¬åœ°å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œå›é€€åˆ°è¿œç¨‹å›¾ç‰‡
                img.onerror = function() {
                    console.log(`æœ¬åœ°ç¼©ç•¥å›¾åŠ è½½å¤±è´¥: ${title}`);
                    
                    // æ ¹æ®æ¸¸æˆæ ‡é¢˜è®¾ç½®å¤‡ç”¨è¿œç¨‹ç¼©ç•¥å›¾
                    if (title.includes('æš—å½±')) {
                        this.src = 'https://img.gamedistribution.com/d7b4c3e5f4e9415fb0ae1c1a202e02e1-512x384.jpeg';
                    } 
                    else if (title.includes('ä»™äººæŒ')) {
                        this.src = 'https://img.gamedistribution.com/63abbece5c9d4a1e98c2f5c107292d5a-512x384.jpeg';
                    }
                    else if (title.includes('æ€ªç‰©') || title.includes('Monster')) {
                        this.src = 'https://img.gamedistribution.com/c84a08e3a72d4dc9b675b81af732e8e5-512x384.jpeg';
                    }
                    else if (title.includes('æ•°ç‹¬')) {
                        this.src = 'https://img.gamedistribution.com/2e44fb86fd2e4dd3b53f0d8aa7842ace-512x384.jpeg';
                    }
                };
            });
        });

        // ç›´æ¥åœ¨HTMLä¸­è®¾ç½®æ­£ç¡®çš„å›¾ç‰‡è·¯å¾„
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ç›´æ¥è®¾ç½®æ¸¸æˆç¼©ç•¥å›¾');
            
            // è·å–æ‰€æœ‰æ¸¸æˆå¡ç‰‡
            const gameCards = document.querySelectorAll('.game-card');
            
            // éå†æ‰€æœ‰æ¸¸æˆå¡ç‰‡
            gameCards.forEach(card => {
                const title = card.querySelector('h3')?.textContent || '';
                const img = card.querySelector('img');
                
                if (!img) return;
                
                // æ ¹æ®æ¸¸æˆæ ‡é¢˜è®¾ç½®æ­£ç¡®çš„å›¾ç‰‡è·¯å¾„
                if (title === 'Monster Survivors' || title.includes('æ€ªç‰©')) {
                    // ç›´æ¥è®¾ç½®ç»å¯¹è·¯å¾„
                    img.src = './thumbnails/monster-survivors.jpg';
                    console.log('è®¾ç½®Monster Survivorsç¼©ç•¥å›¾:', img.src);
                } 
                else if (title === 'æ•°ç‹¬æŒ‘æˆ˜' || title.includes('æ•°ç‹¬')) {
                    img.src = './thumbnails/Sudoku.jpg';
                    console.log('è®¾ç½®æ•°ç‹¬ç¼©ç•¥å›¾:', img.src);
                }
                else if (title === 'æš—å½±çªè¢­' || title.includes('æš—å½±')) {
                    img.src = './thumbnails/Shadow Strike.jpg';
                    console.log('è®¾ç½®æš—å½±çªè¢­ç¼©ç•¥å›¾:', img.src);
                }
                else if (title === 'ä»™äººæŒéº¦è€ƒä¼Š' || title.includes('ä»™äººæŒ')) {
                    img.src = './thumbnails/Cactus McCoy1.jpg';
                    console.log('è®¾ç½®ä»™äººæŒéº¦è€ƒä¼Šç¼©ç•¥å›¾:', img.src);
                }
                else if (title === 'å¤ªç©ºå†’é™©' || title.includes('å¤ªç©º')) {
                    // å¦‚æœæœ‰å¤ªç©ºå†’é™©çš„ç¼©ç•¥å›¾ï¼Œä¹Ÿè®¾ç½®ä¸€ä¸‹
                    img.src = './thumbnails/space-adventure.jpg';
                    console.log('è®¾ç½®å¤ªç©ºå†’é™©ç¼©ç•¥å›¾:', img.src);
                }
                
                // æ·»åŠ å›¾ç‰‡åŠ è½½é”™è¯¯å¤„ç†
                img.onerror = function() {
                    console.error(`ç¼©ç•¥å›¾åŠ è½½å¤±è´¥: ${title}, è·¯å¾„: ${this.src}`);
                    
                    // å°è¯•ä¸åŒçš„è·¯å¾„æ ¼å¼
                    if (this.src.includes('thumbnails/')) {
                        // å°è¯•ç›´æ¥ä½¿ç”¨æ–‡ä»¶å
                        if (title.includes('æ€ªç‰©') || title.includes('Monster')) {
                            this.src = 'monster-survivors.jpg';
                        } 
                        else if (title.includes('æ•°ç‹¬')) {
                            this.src = 'Sudoku.jpg';
                        }
                        else if (title.includes('æš—å½±')) {
                            this.src = 'Shadow Strike.jpg';
                        }
                        else if (title.includes('ä»™äººæŒ')) {
                            this.src = 'Cactus McCoy1.jpg';
                        }
                        
                        // å¦‚æœä»ç„¶å¤±è´¥ï¼Œä½¿ç”¨è¿œç¨‹å›¾ç‰‡
                        this.onerror = function() {
                            if (title.includes('æš—å½±')) {
                                this.src = 'https://img.gamedistribution.com/d7b4c3e5f4e9415fb0ae1c1a202e02e1-512x384.jpeg';
                            } 
                            else if (title.includes('ä»™äººæŒ')) {
                                this.src = 'https://img.gamedistribution.com/63abbece5c9d4a1e98c2f5c107292d5a-512x384.jpeg';
                            }
                            else if (title.includes('æ€ªç‰©') || title.includes('Monster')) {
                                this.src = 'https://img.gamedistribution.com/c84a08e3a72d4dc9b675b81af732e8e5-512x384.jpeg';
                            }
                            else if (title.includes('æ•°ç‹¬')) {
                                this.src = 'https://img.gamedistribution.com/2e44fb86fd2e4dd3b53f0d8aa7842ace-512x384.jpeg';
                            }
                        };
                    }
                };
            });
        });

        // å¹¿å‘Šæ‹¦æˆªå’Œå¤„ç†å‡½æ•°
        document.addEventListener('DOMContentLoaded', function() {
            console.log('åˆå§‹åŒ–å¹¿å‘Šæ‹¦æˆªç³»ç»Ÿ');
            
            // 1. iframeæ²™ç›’å±æ€§å¢å¼º
            function enhanceIframeSecurity() {
                const gameFrame = document.getElementById('gameFrame');
                if (gameFrame) {
                    // æ·»åŠ æ²™ç›’å±æ€§ï¼Œé™åˆ¶iframeå†…å®¹çš„èƒ½åŠ›
                    gameFrame.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-popups allow-forms');
                    
                    // æ·»åŠ CSPç­–ç•¥
                    gameFrame.setAttribute('csp', "default-src 'self'; script-src 'self' 'unsafe-inline'; frame-src 'self'");
                    
                    console.log('å·²å¢å¼ºiframeå®‰å…¨æ€§');
                }
            }
            
            // 2. å¹¿å‘Šå…ƒç´ ç§»é™¤å‡½æ•°
            function setupAdRemoval() {
                const gameFrame = document.getElementById('gameFrame');
                if (!gameFrame) return;
                
                // å½“iframeåŠ è½½å®Œæˆå
                gameFrame.addEventListener('load', function() {
                    try {
                        // å°è¯•è®¿é—®iframeå†…å®¹
                        const iframeDoc = gameFrame.contentDocument || gameFrame.contentWindow.document;
                        
                        // å®šä¹‰è¦ç§»é™¤çš„å¹¿å‘Šå…ƒç´ é€‰æ‹©å™¨
                        const adSelectors = [
                            '.ad-container', '.advertisement', '.banner-ad', 
                            '[id*="ad-"]', '[class*="ad-"]', '[id*="banner"]',
                            'iframe[src*="ads"]', 'iframe[src*="doubleclick"]',
                            'iframe[src*="googlead"]', 'div[id*="google_ads"]',
                            'ins.adsbygoogle'
                        ];
                        
                        // ç§»é™¤åŒ¹é…çš„å…ƒç´ 
                        adSelectors.forEach(selector => {
                            const adElements = iframeDoc.querySelectorAll(selector);
                            adElements.forEach(el => {
                                el.style.display = 'none';
                                console.log('å·²éšè—å¹¿å‘Šå…ƒç´ :', selector);
                            });
                        });
                        
                        // ç›‘å¬åŠ¨æ€æ·»åŠ çš„å¹¿å‘Š
                        const observer = new MutationObserver(function(mutations) {
                            mutations.forEach(function(mutation) {
                                if (mutation.addedNodes.length) {
                                    adSelectors.forEach(selector => {
                                        const newAds = iframeDoc.querySelectorAll(selector);
                                        newAds.forEach(ad => {
                                            ad.style.display = 'none';
                                            console.log('å·²éšè—åŠ¨æ€æ·»åŠ çš„å¹¿å‘Š');
                                        });
                                    });
                                }
                            });
                        });
                        
                        // é…ç½®è§‚å¯Ÿé€‰é¡¹
                        observer.observe(iframeDoc.body, {
                            childList: true,
                            subtree: true
                        });
                        
                    } catch (e) {
                        console.log('æ— æ³•è®¿é—®iframeå†…å®¹ï¼Œå¯èƒ½æ˜¯ç”±äºè·¨åŸŸé™åˆ¶:', e);
                        // è·¨åŸŸæƒ…å†µä¸‹æ— æ³•ç›´æ¥æ“ä½œiframeå†…å®¹
                    }
                });
            }
            
            // 3. ä¿®æ”¹openModalå‡½æ•°ï¼Œæ·»åŠ å¹¿å‘Šæ‹¦æˆªåŠŸèƒ½
            const originalOpenModal = window.openModal;
            window.openModal = function(url) {
                console.log('ä½¿ç”¨å¢å¼ºç‰ˆopenModalæ‰“å¼€æ¸¸æˆ:', url);
                
                // è°ƒç”¨åŸå§‹å‡½æ•°
                originalOpenModal(url);
                
                // åº”ç”¨å¹¿å‘Šæ‹¦æˆªæªæ–½
                enhanceIframeSecurity();
                setupAdRemoval();
                
                // æ·»åŠ å…¨å±æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œå…¨å±å¯ä»¥å‡å°‘çœ‹åˆ°å¹¿å‘Šçš„æœºä¼š
                const fullscreenBtn = document.getElementById('fullscreenBtn');
                if (fullscreenBtn) {
                    fullscreenBtn.addEventListener('click', function() {
                        const iframe = document.getElementById('gameFrame');
                        if (iframe) {
                            if (iframe.requestFullscreen) {
                                iframe.requestFullscreen();
                            } else if (iframe.mozRequestFullScreen) {
                                iframe.mozRequestFullScreen();
                            } else if (iframe.webkitRequestFullscreen) {
                                iframe.webkitRequestFullscreen();
                            } else if (iframe.msRequestFullscreen) {
                                iframe.msRequestFullscreen();
                            }
                        }
                    });
                }
            };
            
            // åˆå§‹åŒ–
            enhanceIframeSecurity();
            setupAdRemoval();
        });
    </script>
</body>
</html>